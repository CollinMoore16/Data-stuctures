<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>CMPS 260: Module 8 Homework</title>
<style>* { font-family: monospace; }</style>
<script>
//--------------//
// Dictionaries //
//--------------//
console.log("Dictionaries");

// 1. Implement the dictionary data structure using the prototype (as opposed
//    to the version we wrote in class).

function Dictionary() {
  this.items = {};

  Dictionary.prototype.set = function(key, value) {
    items[key] = value; 
  };

  Dictionary.prototype.delete = function(key) {
    if(Dictionary.prototype.has(key)) {
      delete items[keys];
      return true;
    }
    return false;
  };

  Dictionary.prototype.has = function(key) {
    return key in items;
  };

  Dictionary.prototype.get = function(key) {
    return Dictionary.prototype.get(key) ? items[key] : undefined;
  };

  Dictionary.prototype.clear = function() {
    items = {};
  };

  Dictionary.prototype.size = function() {
    return object.keys(items).length;
  };

  Dictionary.prototype.keys = function() {
    return object.keys(items);
  };

  Dictionary.prototype.values = function() {
    var values = [];
    for(var a in items) {
      if(Dictionary.prototype.has(a)) {
        values.push(items[a]);
      }
    }
    return values;
  };

  Dictionary.prototype.getItems = function() {
    return items;
  };

}

// 2. Run some tests that show that your code works.

var dictionary = new Dictionary();
dictionary.set("test1", "test1@test.com");
dictionary.set("test2", "test2@test.com");
console.log(dictionary.has("test1") === true);
console.log(dictionary.has("test2") === true);
dictionary.delete("test1");
console.log(dictionary.has("test1") === true);

//----------------//
// The hash table //
//----------------//
console.log("The hash table")

// 1. Implement the hash table data structure using the prototype (as opposed
//    to the version we wrote in class). Use separate chaining to resolve
//    collisions and the djb2 hash function for hashing.
function HashTable() {
  var table = [];

  HashTable.prototype.loseloseHashCode = function(key) {
    var hash = 0;
    for(var i = 0; i < key,length; i++) {
      hash += key.charCodeAt(i);
    }
    return hash % 37;
  };

  HashTable.prototype.put = function(key,value) {
    var position = HashTable.prototype.loseloseHashCode(key);
    console.log(position + " - " + key);
    if(table[position] === undefined) {
      table[position] = new LinkedList();
    }
    table[position].append(new ValuePair(key, value));
  }; 

  HashTable.prototype.remove = function(key) {

    var position = HashTable.prototype.loseloseHashCode(key);
    
    if(table[position] === undefined) {
      var current = table[position].getHead();
      while(current.next){
        if(current.element.key === key) {
          table[position].remove(current.element);
          if(table[position].isEmpty()){
            table[position] = undefined;
          }
          return true;
        }
        current = current.next;
      }
    }
    if(current.element.key === key) {
      table[position].remove(current.element);
      if(table[position].isEmpty()){
        table[position] = undefined;
      }
      return true;
    }
    return false;
  };

  HashTable.prototype.get = function(key) {

    var position = HashTable.prototype.loseloseHashCode(key);

    if(table[position] !== undefined) {
      var current = table[position].getHead();
      while(current.next){
        if(current.element.key === key) {
          return current.element.next;
        }
        current = current.next;
      }
        if(current.element.key === key) {
          return current.element.value;
        } 
      }
      return undefined;
  };

  HashTable.prototype.print = function() {
    for (var i = 0; i < table.length; i++) {
      if (table[i] !== undefined) {
        console.log(i + " - " + table[i]);
      }
    }
  };
  
}

// 2. Run some tests that show that your code works.

var HashTable = new HashTable();
HashTable.set("Roll Tide", "rolltide@nicksaban.com");
HashTable.set("Penn State loses", "pennstatelost@psu.edu");
console.log(HashTable.has("Roll Tide") === true);
console.log(HashTable.has("Pitt") === true);
HashTable.delete("Roll Tide");
console.log(HashTable.has("Roll Tide") === true);

// 3. The book discusses linear probing but their approach has a serious
//    problem. What is the issue?
//    HINT: The issue can occur when there is a hash collision (two values
//          mapped to the same index) in combination with a delete operation.

/* ANSWER FOR QUESTION 3
if you donâ€™t pick an offset wisely, you can jump back to where you started
 and miss out on so many possible positions in the array.
 */

//---------//
// Project //
//---------//
console.log("Project");

// 1. Complete the method below that adds all key-value pairs from one
//    dictionary into another. See also the example below.

Dictionary.prototype.merge = function(dict) {
  // add all key-value pairs in 'dict' to 'this'
};

// Test your code by uncommenting these lines:
var dict1 = new Dictionary();
dict1.set("key1", "val1");
dict1.set("key2", "val2");
dict1.set("key3", "val3");
var dict2 = new Dictionary();
dict2.set("key3", "val3b");
dict2.set("key4", "val4");
dict1.merge(dict2);
dict1.print(); // should contain key1-val1, key2-val2, key3-val3b, key4-val4



</script>
</head>
<body>
  See console!
</body>
</html>
